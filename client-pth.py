import socket  # –†–∞–±–æ—Ç–∞ —Å TCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–æ—Ä—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
server_host = input("–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, localhost): ")
server_port = int(input("–í–≤–µ–¥–∏—Ç–µ –ø–æ—Ä—Ç: "))

# –°–æ–∑–¥–∞–Ω–∏–µ TCP —Å–æ–∫–µ—Ç–∞
client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É–¥–∞–ª—ë–Ω–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É
client_socket.connect((server_host, server_port))
print("üîó –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º.")

# –ë—É—Ñ–µ—Ä –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
recv_buffer = ""

# –¶–∏–∫–ª –æ–±—â–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º
while True:
    # –ü–æ–ª—É—á–∞–µ–º –≤–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_input = input("–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ('exit' ‚Äî –∑–∞–≤–µ—Ä—à–∏—Ç—å): ")

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä—É (–≤ –∫–æ–Ω—Ü–µ —Å–∏–º–≤–æ–ª –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)
    client_socket.send((user_input + "\n").encode("utf-8"))
    print("üì® –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ.")

    # –ñ–¥—ë–º –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
    full_reply = ""
    while True:
        chunk = client_socket.recv(1024)
        if not chunk:
            # –°–µ—Ä–≤–µ—Ä –∑–∞–∫—Ä—ã–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
            break
        recv_buffer += chunk.decode("utf-8")
        if "\n" in recv_buffer:
            full_reply, recv_buffer = recv_buffer.split("\n", 1)
            break

    print("üì• –û—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞:")
    print(full_reply)

    # –ó–∞–≤–µ—Ä—à–∞–µ–º, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—Å–∞–ª 'exit'
    if user_input.lower() == "exit":
        break

# –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
client_socket.close()
print("‚ùé –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–æ.")
